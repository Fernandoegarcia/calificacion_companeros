<template>
    <div>
        <v-toolbar color="green accent-4">
            <v-spacer />
            <v-toolbar-title>
            Sign Up
            </v-toolbar-title>
            <v-spacer />
        </v-toolbar>

        <v-row justify="center" align-content="center">
            <div class="LoginBox green accent-1">

                <a href="#/login">Al ready Sign Up? Login</a>
                
                <h1>Login/Sign Up:</h1>
                <br />
                <h2>
                    User Name:
                </h2>
                <v-text-field v-model="name" />
                <h2>
                    Email:
                </h2>
                <v-text-field v-model="email" type="email"/>
                <h2>
                    Cargo:
                </h2>
                <v-text-field v-model="cargo"/>
                <h2>
                    Company:
                </h2>
                <v-text-field v-model="company"/>
                <h2>
                    Password:
                </h2>
                <v-text-field v-model="pwd" type="password"/>

                <h2>Sex:</h2>

                <v-select :items="sexs" v-model="sex" />

                <h2>Type:</h2>

                <v-select :items="types" v-model="type" />

                <h2>Age:</h2>

                <v-text-field type="number" />

                <h2>Date:</h2>

                <input type="date" v-model="date" />

                <br>
                <br>
                <br>


                <v-btn color="pink accent-3" @click="signup" class="mr-9">
                    Sign Up
                </v-btn>

            </div>
        </v-row>

    </div>
</template>

<script>
export default {
    methods: {
        async signup() {

            if (this.pwd.length == 8) {
                const credentials = {

                "nombre": this.name,
                "compañia": this.company,
                "cargo": this.cargo,
                "sexo": this.sex,
                "edad": this.age,
                "fecha_nacimiento": this.date,
                "user_name": this.name,
                "password": this.pwd,
                "email": this.email,
                "tipo": this.type

            }

            console.log(credentials);

            const response = await fetch("http://127.0.0.1:8000/usuario/registrar", {
                mode: 'cors',
                method: "POST",
                headers: {
                    "Content-Type": 'application/json',
                    "Accept": 'application/json'
                },
                body: JSON.stringify(credentials)
            });

            const json = await response.json();

            console.log(json)
            } else {
                alert("Password must be 8 characters at least")
            }
        },

        async login() {
            if (this.pwd.length == 8) {
                const credentials = {
                    "nombre": this.name,
                    "compañia": this.company,
                    "cargo": this.cargo,
                    "sexo": this.sex,
                    "edad": this.age,
                    "fecha_nacimiento": this.date,
                    "user_name": this.name,
                    "password": this.pwd,
                    "email": this.email,
                    "tipo": this.type
                }
            }
        }
    },
    data: () => ({
        name: "",
        company: "",
        cargo: "",
        sexs: ['masculino', "femenino", "otro"],
        sex: "",
        email: "",
        pwd: "",
        age: 18,
        date: "",
        types: ['empleador', 'empleado', 'desempleado'],
        type: ''
    })
}
</script>

<style scoped>
.LoginBox {
    margin-top: 10%;
    padding: 60px 100px;
    border-radius: 20px;
}
</style>